# AiHub - AI Gateway ç®¡ç†å¹³å°

ä¸€ä¸ªç»Ÿä¸€çš„AIæ¨¡å‹ç½‘å…³ç®¡ç†å¹³å°ï¼Œæ”¯æŒå¤šä¸ªAIæä¾›å•†ï¼ˆOpenAIã€Anthropicã€Googleã€Kiroï¼‰çš„è´¦å·ç®¡ç†ã€è´Ÿè½½å‡è¡¡å’Œä½¿ç”¨ç»Ÿè®¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ”„ **å¤šæä¾›å•†æ”¯æŒ**ï¼šOpenAIã€Anthropicã€Google Geminiã€AWS Kiro
- ğŸ¯ **æ™ºèƒ½è´Ÿè½½å‡è¡¡**ï¼šè‡ªåŠ¨é€‰æ‹©å¯ç”¨è´¦å·ï¼Œæ”¯æŒä¼˜å…ˆçº§é…ç½®
- ğŸ“Š **å®æ—¶ç»Ÿè®¡**ï¼šè¯·æ±‚æ•°ã€Tokenæ¶ˆè€—ã€ç”¨é‡è¶‹åŠ¿å¯è§†åŒ–
- ğŸ” **ç”¨æˆ·ç®¡ç†**ï¼šAPI Keyç®¡ç†ã€é…é¢æ§åˆ¶
- ğŸ’³ **è´¦å·æ± ç®¡ç†**ï¼šæ‰¹é‡å¯¼å…¥ã€ç”¨é‡ç›‘æ§ã€è‡ªåŠ¨åˆ·æ–°

### ç®¡ç†åŠŸèƒ½
- **æ¸ é“ç®¡ç†**ï¼šé…ç½®ä¸åŒAIæä¾›å•†çš„æ¸ é“
- **è´¦å·ç®¡ç†**ï¼šç®¡ç†æ¯ä¸ªæ¸ é“çš„APIè´¦å·æ± 
- **ç”¨æˆ·ç®¡ç†**ï¼šåˆ›å»ºç”¨æˆ·ã€åˆ†é…é…é¢
- **ç»Ÿè®¡åˆ†æ**ï¼šè¯·æ±‚è¶‹åŠ¿ã€Tokenæ¶ˆè€—ã€Topç”¨æˆ·æ’è¡Œ

### ç•Œé¢ç‰¹æ€§
- ğŸŒ“ **äº®è‰²/æš—è‰²ä¸»é¢˜**ï¼šè‡ªåŠ¨é€‚é…ç”¨æˆ·åå¥½
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯
- ğŸ“ˆ **æ•°æ®å¯è§†åŒ–**ï¼šChart.jså›¾è¡¨å±•ç¤ºè¶‹åŠ¿
- ğŸ¨ **ç°ä»£åŒ–UI**ï¼šå¡ç‰‡å¼è®¾è®¡ã€è¿›åº¦æ¡å±•ç¤º

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.10+
- aiohttp
- aiosqlite

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd AiHub

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œè®¾ç½®ADMIN_KEY

# å¯åŠ¨æœåŠ¡
python main.py
```

### è®¿é—®

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000`

é¦–æ¬¡è®¿é—®éœ€è¦è¾“å…¥ç®¡ç†å¯†é’¥ï¼ˆåœ¨.envä¸­é…ç½®çš„ADMIN_KEYï¼‰

## é¡¹ç›®ç»“æ„

```
AiHub/
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹ï¼ˆAccount, Channel, User, Logï¼‰
â”œâ”€â”€ providers/       # AIæä¾›å•†å®ç°
â”œâ”€â”€ server/          # WebæœåŠ¡å™¨ï¼ˆAPI, Routes, Middlewareï¼‰
â”œâ”€â”€ converters/      # è¯·æ±‚/å“åº”æ ¼å¼è½¬æ¢
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°ï¼ˆLogger, Tokenè®¡ç®—ï¼‰
â”œâ”€â”€ static/          # å‰ç«¯é™æ€æ–‡ä»¶
â”œâ”€â”€ logs/            # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ main.py          # å…¥å£æ–‡ä»¶
â””â”€â”€ config.py        # é…ç½®æ–‡ä»¶
```

## APIæ–‡æ¡£

### è®¤è¯
æ‰€æœ‰APIè¯·æ±‚éœ€è¦åœ¨Headerä¸­åŒ…å«ï¼š
```
X-Admin-Key: <your-admin-key>
```

### ä¸»è¦ç«¯ç‚¹

#### æ¸ é“ç®¡ç†
- `GET /api/channels` - è·å–æ‰€æœ‰æ¸ é“
- `POST /api/channels` - åˆ›å»ºæ¸ é“
- `PUT /api/channels/{id}` - æ›´æ–°æ¸ é“
- `DELETE /api/channels/{id}` - åˆ é™¤æ¸ é“

#### è´¦å·ç®¡ç†
- `GET /api/channels/{id}/accounts` - è·å–æ¸ é“è´¦å·
- `POST /api/channels/{id}/accounts` - æ·»åŠ è´¦å·
- `POST /api/channels/{id}/accounts/import` - æ‰¹é‡å¯¼å…¥
- `POST /api/accounts/{id}/refresh-usage` - åˆ·æ–°ç”¨é‡

#### ç”¨æˆ·ç®¡ç†
- `GET /api/users` - è·å–æ‰€æœ‰ç”¨æˆ·
- `POST /api/users` - åˆ›å»ºç”¨æˆ·
- `DELETE /api/users/{id}` - åˆ é™¤ç”¨æˆ·

#### ç»Ÿè®¡æ•°æ®
- `GET /api/stats?days=7` - è·å–ç»Ÿè®¡æ•°æ®
- `GET /api/logs` - è·å–è¯·æ±‚æ—¥å¿—

## Tokenè®¡ç®—

é¡¹ç›®ä½¿ç”¨ç²¾ç¡®çš„Tokenä¼°ç®—ç®—æ³•ï¼ŒåŸºäºnew-apiçš„å®ç°ï¼š

- **OpenAIæ¨¡å‹**ï¼šä½¿ç”¨OpenAIæƒé‡
- **Claudeæ¨¡å‹**ï¼šä½¿ç”¨Claudeæƒé‡
- **Geminiæ¨¡å‹**ï¼šä½¿ç”¨Geminiæƒé‡

æ”¯æŒçš„å­—ç¬¦ç±»å‹ï¼š
- è‹±æ–‡å•è¯ã€æ•°å­—ã€ä¸­æ–‡å­—ç¬¦
- ç¬¦å·ã€æ•°å­¦ç¬¦å·ã€Emoji
- URLåˆ†éš”ç¬¦ã€æ¢è¡Œç¬¦ã€ç©ºæ ¼

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰
```bash
# ç®¡ç†å¯†é’¥
ADMIN_KEY=your-secret-key

# æ•°æ®åº“è·¯å¾„
DATABASE_PATH=aihub.db

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=8000
```

### æ”¯æŒçš„AIæä¾›å•†

#### OpenAI
- æ¨¡å‹ï¼šgpt-4, gpt-4-turbo, gpt-3.5-turboç­‰
- éœ€è¦ï¼šAPI Key

#### Anthropic
- æ¨¡å‹ï¼šclaude-3-opus, claude-3-sonnetç­‰
- éœ€è¦ï¼šAPI Key

#### Google Gemini
- æ¨¡å‹ï¼šgemini-pro, gemini-pro-visionç­‰
- éœ€è¦ï¼šAPI Key

#### AWS Kiro (CodeWhisperer)
- æ¨¡å‹ï¼šåŸºäºClaudeçš„æ¨¡å‹
- éœ€è¦ï¼šAWS Builder IDè®¤è¯
- æ”¯æŒï¼šè‡ªåŠ¨åˆ·æ–°ç”¨é‡ã€å…è´¹é¢åº¦ç»Ÿè®¡

## å¼€å‘

### æ·»åŠ æ–°çš„AIæä¾›å•†

1. åœ¨`providers/`ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿`BaseProvider`ç±»
3. å®ç°`chat()`æ–¹æ³•
4. åœ¨`providers/__init__.py`ä¸­æ³¨å†Œ

### è¿è¡Œæµ‹è¯•

```bash
python -m pytest tests/
```

## éƒ¨ç½²

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
docker build -t aihub .
docker run -d -p 8000:8000 -v ./data:/app/data aihub
```

### ç³»ç»ŸæœåŠ¡

```bash
# å¤åˆ¶æœåŠ¡æ–‡ä»¶
sudo cp aihub.service /etc/systemd/system/

# å¯åŠ¨æœåŠ¡
sudo systemctl start aihub
sudo systemctl enable aihub
```

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-05)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ¨ ç°ä»£åŒ–UIè®¾è®¡ï¼ˆäº®è‰²/æš—è‰²ä¸»é¢˜ï¼‰
- ğŸ“Š å®Œæ•´çš„ç»Ÿè®¡åˆ†æåŠŸèƒ½
- ğŸ”„ æ”¯æŒ4ä¸ªä¸»æµAIæä¾›å•†
- ğŸ’¾ Tokenç»Ÿè®¡ç›´æ¥å­˜å‚¨åˆ°æ•°æ®åº“
- ğŸ“ˆ Chart.jså¯è§†åŒ–å›¾è¡¨
